<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>When We All Vote</title>
    <style>
      #iframe-container {
        position: relative;
        overflow: hidden;
        width: 100%;
        min-height: 300px;
        padding-top: 56.25%; /* 16:9 Aspect Ratio (divide 9 by 16 = 0.5625) */
      }
      .responsive-iframe {
        position: absolute;
        top: 0;
        left: 0;
        bottom: 0;
        right: 0;
        width: 100%;
        height: 100%;
      }
    </style>
    <link rel="icon" type="image/x-icon" href="https://www.whenweallvote.org/wp-content/themes/whenwevote/favicon.png">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="https://www.whenweallvote.org/wp-content/themes/whenwevote/style.css">
  </head>
  <body>
    <main>
      <div class="my-4">
        <div class="container">
          <div class="my-4">
            <h1 class="site-branding">
              <a title="When We All Vote" href="https://www.whenweallvote.org">
                <svg class="icon icon-whenwevote-logo" xmlns="http://www.w3.org/2000/svg" id="Layer_1"
                  data-name="Layer 1" viewBox="0 0 1131 92.61">
                  <defs>
                    <style>.cls-1 {
                      fill: #1a1144;
                      }
                      .cls-2 {
                      fill: #ee334b;
                      }
                    </style>
                  </defs>
                  <title>wwav_logo_horizontal</title>
                  <polygon class="cls-1" points="866.27 5.13 848.7 63.53 831.12 5.13 808.02 5.13 835.79 90.39 861.6 90.39 889.37 5.13 866.27 5.13"/>
                  <polygon class="cls-1" points="1000.65 5.13 1000.65 25.61 1022.01 25.61 1022.01 90.39 1043.19 90.39 1043.19 25.61 1064.55 25.61 1064.55 5.13 1000.65 5.13"/>
                  <polygon class="cls-1" points="1076.59 5.13 1076.59 90.39 1131 90.39 1131 69.92 1097.77 69.92 1097.77 57.4 1127.44 57.4 1127.44 37.17 1097.77 37.17 1097.77 25.61 1130.4 25.61 1130.4 5.13 1076.59 5.13"/>
                  <path class="cls-1" d="M988.09,36.48l-13.3,15c0,.61.09,1.22.09,1.84a29.2,29.2,0,1,1-15.1-25.55L970.86,15.3a45.63,45.63,0,1,0,17.23,21.18" transform="translate(-6 -6.36)"/>
                  <path class="cls-2" d="M944.33,74.67,925.18,49.45a6.23,6.23,0,1,1,9.92-7.54l10,13.13L986.35,8.46a6.23,6.23,0,0,1,9.33,8.27Z" transform="translate(-6 -6.36)"/>
                  <polygon class="cls-1" points="99.55 7.11 79.77 76.25 58.22 7.11 49.66 7.11 28.23 76.25 8.53 7.8 8.34 7.11 0 7.11 23.62 88.58 32.3 88.58 54 19.09 75.38 87.91 75.58 88.58 84.27 88.58 107.89 7.11 99.55 7.11"/>
                  <polygon class="cls-1" points="177.31 42.92 132.94 42.92 132.94 7.11 125.02 7.11 125.02 88.57 132.94 88.57 132.94 50.5 177.31 50.5 177.31 88.57 185.23 88.57 185.23 7.11 177.31 7.11 177.31 42.92"/>
                  <polygon class="cls-1" points="216.72 51.29 253.09 51.29 253.09 43.71 216.72 43.71 216.72 14.69 255.93 14.69 255.93 7.11 208.8 7.11 208.8 88.58 256.5 88.58 256.5 81 216.72 81 216.72 51.29"/>
                  <polygon class="cls-1" points="327.37 73.44 282.04 7.53 281.75 7.11 275.08 7.11 275.08 88.58 283 88.58 283 22.25 328.21 88.16 328.49 88.58 335.28 88.58 335.28 7.11 327.37 7.11 327.37 73.44"/>
                  <polygon class="cls-1" points="469.49 5.19 451.08 69.53 431.03 5.19 419.64 5.19 399.69 69.53 381.18 5.19 368.83 5.19 393.57 90.5 405.11 90.5 425.39 25.56 445.56 90.5 457.11 90.5 481.85 5.19 469.49 5.19"/>
                  <polygon class="cls-1" points="494.49 5.19 494.49 90.5 546.04 90.5 546.04 79.07 506.26 79.07 506.26 53.22 542.63 53.22 542.63 41.79 506.26 41.79 506.26 16.61 545.47 16.61 545.47 5.19 494.49 5.19"/>
                  <path class="cls-1" d="M631.59,29.83,645.14,65.2H618Zm-5.15-18.28L593.29,96.86h12.54l7.73-20.23H649.5l7.74,20.23h12.52l-33-85.31Z" transform="translate(-6 -6.36)"/>
                  <polygon class="cls-1" points="673.99 5.19 673.99 90.5 723.26 90.5 723.26 79.07 685.75 79.07 685.75 5.19 673.99 5.19"/>
                  <polygon class="cls-1" points="735.72 5.19 735.72 90.5 785 90.5 785 79.07 747.49 79.07 747.49 5.19 735.72 5.19"/>
                </svg>
              </a>
            </h1>
          </div>
          <h1>Stay Safe. Save Time. Vote Early.</h1>
          <p class="lead">Millions of Americans have already cast their ballots. Find where to vote early.</p>
          <form id="early-voting">
            <label for="zip" style="font-size: 1.5rem">Enter your zip code:</label>
            <input id="zip" type="number">
            <input type="submit" value="Find sites near me">
          </form>
          <div id="info">
          </div>
          <div id="iframe-target">
          </div>
        </div>
      </div>
    </main>
    <script>
      const input = document.getElementById("zip");
      input.focus();
      input.select();

      const form = document.getElementById("early-voting");
      form.addEventListener("submit", async (event) => {
        event.preventDefault();

        let zip = document.getElementById("zip").value;
        let zipResponse = await fetch("https://public.opendatasoft.com/api/records/1.0/search/?dataset=us-zip-code-latitude-and-longitude&q=" + zip);
        let zipJSON = await zipResponse.json();
        let latitude = zipJSON.records[0].fields.latitude;
        let longitude = zipJSON.records[0].fields.longitude;

        let info = '<p>Click a pin below to see the location, hours, and requirements.</p>'
        document.getElementById("info").innerHTML = "<p class='lead'>Click a pin below to see the location, hours, and requirements.</p>";

        let iframeHtml = '<div id="iframe-container"><iframe class="responsive-iframe" src="https://www.google.com/maps/d/u/0/embed?mid=1TDZ8INl1VkSXduZERPpU63C3C-c-rlmS&ll=' + latitude + '%2C' + longitude + '&z=11"></iframe></div>';
        document.getElementById("iframe-target").innerHTML = iframeHtml;
        window.scrollTo(0, document.body.scrollHeight);
      });
    </script>
  </body>
</html>